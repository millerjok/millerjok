<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Flashcard App</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to bottom, #c9d6ff, #e2e2e2);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
        }
        .banner {
            background: #FDFFFD;
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 1.5em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            margin-top: 40px;
        }
        .kana-text {
            font-size: 1em; /* Shrink the font size */
            color: rgb(50, 135, 178); /* Change the color to grey */
            font-weight: bold
        }
        .romaji-text {
            font-size: 0.8em; /* Shrink the font size */
            color: rgb(241, 241, 241); /* Change the text color to grey */
        }
        .english-text {
            font-size: 1em; /* Shrink the font size */
            color: rgb(0, 0, 0); /* Change the color to grey */
        }
        
        .catalogue-container {
    text-align: center; /* Centers the heading and container content */
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    padding: 30px;
    width: 80%;
    margin: auto; /* Centers the whole container */
}

.button-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 20px; /* Adds spacing between buttons */
    margin-top: 20px; /* Space between heading and buttons */
}


        .catalogue-button {
            padding: 12px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #4CAF50;
            /* Calming green color for focus */
            color: #fff;
            transition: background-color 0.3s;
            margin: 10px;
        }
        .catalogue-button:hover {
            background-color: #81c784;
        }
        

        .mode-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            padding: 30px;
            display: none;
        }
        .flashcard-container, .test-container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            width: 600px;
            height: 700px;
            /* Enlarged for better focus */
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 40px;
            transition: transform 0.3s;
    
        }
        .flashcard-container:hover, .test-container:hover {
            transform: scale(1.05);
        }
        .flashcard, .test-question {
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 10px;
            background: #f7f7f7;
            width: 100%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            color: #333;
        }
        .button-container, .test-answers {
            display: flex;
            justify-content: top;
            width: 100%;
            flex-wrap: wrap;
            flex-direction: column;
            align-items: top;
        }
        button {
            padding: 12px;
            font-size: 1.1em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #4c7daf;
            color: #fff;
            transition: background-color 0.3s;
            margin: 10px;
        }
        button:hover {
            background-color: #6e95bb;
        }
        #next-button {
            display: none;
        }
        .home-button {
            
    width: 50px;
    height: 50px;
    background: url('https://easy-peasy.ai/cdn-cgi/image/quality=80,format=auto,width=700/https://fdczvxmwwjwpwbeeqcth.supabase.co/storage/v1/object/public/images/a4b6e106-96ea-46c2-bf39-897027ca7402/95418273-1a86-4d3d-9832-d8b87e4813c9.png') no-repeat center center;
    background-size: cover;
    border: none;
    cursor: pointer;
    position: absolute;
    top: 20px;
    left: 20px;
    transition: transform 0.2s;
}
.home-button:hover {
    transform: scale(1.1);
}
.listening-container {
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    width: 600px;
    padding: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: auto;
}

.speaker-button {
    width: 50px;
    height: 50px;
    background: url('https://cdn-icons-png.flaticon.com/512/727/727245.png') no-repeat center center;
    background-size: cover;
    border: none;
    cursor: pointer;
    margin: 20px 0;
    transition: transform 0.2s;
}

.speaker-button:hover {
    transform: scale(1.1);
}

.listening-answers {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
}

.listening-answers button {
    padding: 10px 20px;
    font-size: 1.1em;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    background: #4CAF50;
    color: #fff;
    transition: background-color 0.3s;
}

.listening-answers button:hover {
    background-color: #0058bd;
}

.matching-container {
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    width: 600px;
    padding: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: auto;
}

.matching-game {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin-top: 20px;
}

.matching-item {
    width: 150px;
    padding: 10px;
    background-color: #f7f7f7;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    text-align: center;
    user-select: none;
}

.matching-item.selected {
    background-color: #81c784; /* Change to a distinct color when selected */
    border: 2px solid #4caf50;  /* Add a green border to indicate selection */
}

.flashcard-container,
.test-container,
.matching-container,
.listening-container {
    display: none; /* Initially hidden */
}

.flashcard-container.show,
.test-container.show,
.matching-container.show,
.listening-container.show {
    display: flex; /* Make the container visible */
}




    </style>
<script defer="" data-domain="purple-nanni-72.tiiny.site" src="https://analytics.tiiny.site/js/plausible.js"></script></head>
<body>
    <div class="banner" style="position: relative;">
        <button class="home-button" onclick="resetAllContainers()" title="Return to Home"></button>
        <h1 class="banner-title">2025 VCE Japanese</h1>        
    </div>

<div class="catalogue-container" id="catalogue-container">
    <h2>Choose a set of flashcards to practice</h2>
    <div class="button-grid">
        <button class="catalogue-button" onclick="chooseSet(1)">日本の自然</button>
        <button class="catalogue-button" onclick="chooseSet(2)">高校生活</button>
        <button class="catalogue-button" onclick="chooseSet(3)">伝統の町：京都</button>
        <button class="catalogue-button" onclick="chooseSet(4)">東京のみりょく</button>
        <button class="catalogue-button" onclick="chooseSet(5)">Chapter 5</button>
        <button class="catalogue-button" onclick="chooseSet(6)">Chapter 6</button>
        <button class="catalogue-button" onclick="chooseSet(7)">Not ready</button>
        <button class="catalogue-button" onclick="chooseSet(8)">Not ready</button>
        <button class="catalogue-button" onclick="chooseSet(9)">Not ready</button>
        <button class="catalogue-button" onclick="chooseSet(10)">Not ready</button>
        <button class="catalogue-button" onclick="chooseSet(11)">VCE Kanji</button>
        <button class="catalogue-button" onclick="chooseSet(12)">Advanced</button>
    </div>
</div>

    <div class="mode-container" id="mode-container">
        <h2>Choose a mode to practice</h2>
        <button class="catalogue-button" onclick="startFlashcardMode()">Flashcard Mode</button>
        <button class="catalogue-button" onclick="startTestMode()">Test Mode</button>
        <button class="catalogue-button" onclick="startListeningMode()">Listening Mode</button>
        <button class="catalogue-button" onclick="startMatchingMode()">Matching Mode</button>

    </div>
    
    <div class="listening-container" id="listening-container" style="display: none;">
        <h2>Listening Mode</h2>
        <p>Click to hear the Japanese sentence, then choose the word being used in the sentence.</p>
        <button class="speaker-button" onclick="playListeningAudio()" aria-label="Play word"></button>
        <div class="listening-answers" id="listening-answers"></div>
    </div>

    <div class="flashcard-container" id="flashcard-container">
        <div id="flashcard" class="flashcard" onclick="playAudio()">Click "Show Meaning" to start!</div>
        <div class="button-container">
            <button id="show-meaning-button" onclick="showMeaning()">Show Meaning</button>
            <button id="study-again-button" style="display: none;" onclick="studyAgain()">Study Again</button>
            <button id="next-button" style="display: none;" onclick="nextFlashcard()">Next</button>
        </div>
        
    </div>

    <div class="test-container" id="test-container">
        <div id="test-question" class="test-question">Question will appear here</div>
        <div class="test-answers" id="test-answers"></div>
        
    </div>

    <div class="matching-container" id="matching-container" style="display: none;">
        <h2>Matching Mode</h2>
        <p>Match the Japanese word with its English meaning.</p>
        <div id="matching-game" class="matching-game"></div>
    </div>
    
    <audio id="card-flip-sound" src="card-flip-sound.mp3"></audio>
    <audio id="pikachu-sound" src="pikachu-sound.mp3"></audio>

    <script>
    let totalQuestions = 15;
    let currentQuestion = 0;
    let correctAnswers = 0;

    function startListeningMode() {
    document.getElementById('mode-container').style.display = 'none';
    document.getElementById('listening-container').style.display = 'flex';
    
    // Reset tracking variables
    currentQuestion = 0;
    correctAnswers = 0;

    loadListeningQuestion();
}


function loadListeningQuestion() {
    // Check if we've completed the total number of questions
    if (currentQuestion >= totalQuestions) {
        // Play Pikachu sound
        const pikachuSound = document.getElementById('pikachu-sound');
        pikachuSound.play();

        alert(`Listening Test complete! You got ${correctAnswers}/${totalQuestions} correct.`);
        goBackToCatalogue();
        return;
    }
    // Increment current question number
    currentQuestion++;

    // Select a random card from the current set
    const card = currentSet[Math.floor(Math.random() * currentSet.length)];
    const correctAnswer = card.english;

    // Generate three incorrect answers
    let answers = [correctAnswer];
    while (answers.length < 4) {
        const randomAnswer = currentSet[Math.floor(Math.random() * currentSet.length)].english;
        if (!answers.includes(randomAnswer)) {
            answers.push(randomAnswer);
        }
    }
    // Shuffle answers
    answers = answers.sort(() => Math.random() - 0.5);
    // Update the tally display in the question prompt
    const answersContainer = document.getElementById('listening-answers');
    const tallyContainer = document.createElement('p');
    tallyContainer.style.fontWeight = 'bold';
    tallyContainer.style.marginBottom = '10px';
    tallyContainer.textContent = `Question ${currentQuestion}/${totalQuestions}`;
    answersContainer.innerHTML = '';  // Clear previous content
    answersContainer.appendChild(tallyContainer);
    // Populate the answer buttons
    answers.forEach(answer => {
        const button = document.createElement('button');
        button.textContent = answer;
        button.onclick = () => checkListeningAnswer(answer, correctAnswer);
        answersContainer.appendChild(button);
    });
    // Store the current word for playback
    sessionStorage.setItem('currentListeningWord', JSON.stringify(card));
}


function playListeningAudio() {
    const card = JSON.parse(sessionStorage.getItem('currentListeningWord'));
    if (card) {
        const utterance = new SpeechSynthesisUtterance(card.example); // Play the "example" property
        utterance.lang = 'ja-JP';
        utterance.rate = 0.8; // Set reading speed to be slower (adjust value as needed)

        // Fetch available voices
        let voices = window.speechSynthesis.getVoices();

        // Wait until voices are loaded (sometimes they are not loaded immediately)
        if (voices.length === 0) {
            window.speechSynthesis.onvoiceschanged = () => {
                voices = window.speechSynthesis.getVoices();
                setJapaneseVoice(utterance, voices);
                window.speechSynthesis.speak(utterance);
            };
        } else {
            setJapaneseVoice(utterance, voices);
            window.speechSynthesis.speak(utterance);
        }
    }
}


function checkListeningAnswer(selectedAnswer, correctAnswer) {
    if (selectedAnswer === correctAnswer) {
        correctAnswers++;
        alert('Correct!');
    } else {
        alert('Incorrect. Try again!');
    }

    loadListeningQuestion(); // Load a new question
}


        const vocabularySets = {
            
            1: [
                { kanji: "砂漠", kana: "さばく", romaji: "sabaku", english: "Desert", example: "さばくは広くて、乾燥しています。", exampleEnglish: "The desert is vast and dry." },
                { kanji: "四季", kana: "しき", romaji: "shiki", english: "Four seasons", example: "日本には四季があります。", exampleEnglish: "Japan has four seasons." },
                { kanji: "季節", kana: "きせつ", romaji: "kisetsu", english: "Season", example: "春は私の好きな季節です。", exampleEnglish: "Spring is my favorite season." },
                { kanji: "乾燥", kana: "かんそう", romaji: "kansou", english: "Dryness", example: "冬は空気が乾燥しています。", exampleEnglish: "The air is dry in winter." },
                { kanji: "むし暑い", kana: "むしあつい", romaji: "mushiatsui", english: "Humid and hot", example: "夏はむし暑くて大変です。", exampleEnglish: "Summer is humid and tough." },
                { kanji: "平均気温", kana: "へいきんきおん", romaji: "heikin kion", english: "Average temperature", example: "東京の平均気温は15度です。", exampleEnglish: "The average temperature in Tokyo is 15 degrees." },
                { kanji: "囲まれる", kana: "かこまれる", romaji: "kakomareru", english: "To be surrounded", example: "島国とは、海にかこまれている国です。", exampleEnglish: "An island country is one surrounded by the sea." },
                { kanji: "と同じで", kana: "とおなじで", romaji: "to onaji de", english: "The same as", example: "兄と同じで、私はサッカーが好きです。", exampleEnglish: "Like my brother, I also like soccer." },
                { kanji: "と違って", kana: "とちがって", romaji: "to chigatte", english: "Different from", example: "夏と違って、冬は寒いです。", exampleEnglish: "Unlike summer, winter is cold." },
                { kanji: "と似ていて", kana: "とにていて", romaji: "to niteite", english: "Similar to", example: "春と秋は気温が似ています。", exampleEnglish: "Spring and autumn have similar temperatures." },
                { kanji: "森林浴", kana: "しんりんよく", romaji: "shinrinyoku", english: "Forest bathing", example: "週末に森林浴を楽しみました。", exampleEnglish: "I enjoyed forest bathing on the weekend." },
                { kanji: "楽しむ", kana: "たのしむ", romaji: "tanoshimu", english: "To enjoy", example: "ゆたかな日本の自ぜんを楽しもうと思います。", exampleEnglish: "I want to enjoy Japan's rich nature." },
                { kanji: "火山", kana: "かざん", romaji: "kazan", english: "Volcano", example: "日本には多くの火山があります。", exampleEnglish: "Japan has many volcanoes." },
                { kanji: "南半球", kana: "みなみはんきゅう", romaji: "minami hankyuu", english: "Southern Hemisphere", example: "オーストラリアは南半球にあります。", exampleEnglish: "Australia is in the Southern Hemisphere." },
                { kanji: "によって", kana: "によって", romaji: "niyotte", english: "Depending on", example: "オーストラリアの四季は場所によって違います。", exampleEnglish: "Australia's seasons vary depending on the location." },
                { kanji: "咲く", kana: "さく", romaji: "saku", english: "To bloom", example: "春には桜が咲いています。", exampleEnglish: "Cherry blossoms bloom in spring." },
                { kanji: "紅葉", kana: "こうよう", romaji: "kouyou", english: "Autumn leaves", example: "秋には紅葉がきれいです。", exampleEnglish: "The autumn leaves are beautiful in fall." },
                { kanji: "温泉", kana: "おんせん", romaji: "onsen", english: "Hot spring", example: "温泉に入ってリラックスしました。", exampleEnglish: "I relaxed by soaking in a hot spring." },
                { kanji: "地震", kana: "じしん", romaji: "jishin", english: "Earthquake", example: "日本では地震がよくあります。", exampleEnglish: "Earthquakes often occur in Japan." },
                { kanji: "サル", kana: "さる", romaji: "saru", english: "Monkey", example: "山でサルを見ました。", exampleEnglish: "I saw monkeys in the mountains." },
                { kanji: "鶴", kana: "つる", romaji: "tsuru", english: "Crane", example: "鶴は日本のシンボルです。", exampleEnglish: "The crane is a symbol of Japan." },
                { kanji: "地域", kana: "ちいき", romaji: "chiiki", english: "Region", example: "この地域にはたくさんの自然があります。", exampleEnglish: "There is a lot of nature in this region." },
                { kanji: "約", kana: "やく", romaji: "yaku", english: "Approximately", example: "この川の長さは約500キロです。", exampleEnglish: "The length of this river is approximately 500 kilometers." },
                { kanji: "野生動物", kana: "やせいどうぶつ", romaji: "yasei doubutsu", english: "Wild animal", example: "野生動物を見ることができます。", exampleEnglish: "You can see wild animals." },
                { kanji: "スキー場", kana: "すきーじょう", romaji: "sukiijou", english: "Ski resort", example: "冬にはスキー場に行きます。", exampleEnglish: "I go to the ski resort in winter." }
            ],

            2: [
                { kanji: "高校生活", kana: "こうこうせいかつ", romaji: "koukou seikatsu", english: "High school life", example: "高校生活は楽しいです。", exampleEnglish: "High school life is enjoyable." },
                { kanji: "授業", kana: "じゅぎょう", romaji: "jugyou", english: "Class/Lesson", example: "午前中に授業があります。", exampleEnglish: "There are classes in the morning." },
                { kanji: "それぞれの", kana: "それぞれの", romaji: "sorezore no", english: "Each", example: "それぞれの生徒に課題があります。", exampleEnglish: "Each student has an assignment." },
                { kanji: "廊下", kana: "ろうか", romaji: "rouka", english: "Hallway", example: "廊下を静かに歩きましょう。", exampleEnglish: "Let's walk quietly in the hallway." },
                { kanji: "午後", kana: "ごご", romaji: "gogo", english: "Afternoon", example: "午後にテニスをします。", exampleEnglish: "I play tennis in the afternoon." },
                { kanji: "始まる", kana: "はじまる", romaji: "hajimaru", english: "To start", example: "授業は九時に始まります。", exampleEnglish: "The class starts at nine." },
                { kanji: "朝一番", kana: "あさいちばん", romaji: "asa ichiban", english: "First thing in the morning", example: "朝一番に掃除をします。", exampleEnglish: "I clean first thing in the morning." },
                { kanji: "教室", kana: "きょうしつ", romaji: "kyoushitsu", english: "Classroom", example: "教室で勉強します。", exampleEnglish: "I study in the classroom." },
                { kanji: "体育", kana: "たいいく", romaji: "taiiku", english: "Physical education", example: "体育の授業でバスケットボールをしました。", exampleEnglish: "We played basketball in P.E. class." },
                { kanji: "科学", kana: "かがく", romaji: "kagaku", english: "Science", example: "科学の実験が好きです。", exampleEnglish: "I like science experiments." },
                { kanji: "化学", kana: "かがく", romaji: "kagaku", english: "Chemistry", example: "化学の授業で新しい実験をしました。", exampleEnglish: "We did a new experiment in chemistry class." },
                { kanji: "真剣な", kana: "しんけんな", romaji: "shinkenna", english: "Serious", example: "彼は勉強に真剣です。", exampleEnglish: "He is serious about his studies." },
                { kanji: "生物", kana: "せいぶつ", romaji: "seibutsu", english: "Biology", example: "生物の授業で動物について学びました。", exampleEnglish: "We learned about animals in biology class." },
                { kanji: "国語", kana: "こくご", romaji: "kokugo", english: "National language", example: "国語の授業では日本語を勉強します。", exampleEnglish: "We study Japanese in national language class." },
                { kanji: "社会", kana: "しゃかい", romaji: "shakai", english: "Social studies", example: "社会の授業で歴史を学びました。", exampleEnglish: "We studied history in social studies." },
                { kanji: "書道", kana: "しょどう", romaji: "shodou", english: "Calligraphy", example: "書道の時間に筆で字を書きました。", exampleEnglish: "We wrote characters with a brush during calligraphy time." },
                { kanji: "必修科目", kana: "ひっしゅうかもく", romaji: "hisshuu kamoku", english: "Required subject", example: "数学は必修科目です。", exampleEnglish: "Mathematics is a required subject." },
                { kanji: "選択科目", kana: "せんたくかもく", romaji: "sentaku kamoku", english: "Elective subject", example: "音楽は選択科目です。", exampleEnglish: "Music is an elective subject." },
                { kanji: "売店", kana: "ばいてん", romaji: "baiten", english: "School store", example: "売店でお菓子を買いました。", exampleEnglish: "I bought snacks at the school store." },
                { kanji: "持ってくる", kana: "もってくる", romaji: "mottekuru", english: "To bring", example: "明日、本を持ってきてください。", exampleEnglish: "Please bring the book tomorrow." },
                { kanji: "部活", kana: "ぶかつ", romaji: "bukatsu", english: "Club activity", example: "部活でサッカーをしています。", exampleEnglish: "I play soccer in my club activity." },
                { kanji: "塾", kana: "じゅく", romaji: "juku", english: "Cram school", example: "夕方から塾に行きます。", exampleEnglish: "I go to cram school in the evening." },
                { kanji: "夕方", kana: "ゆうがた", romaji: "yuugata", english: "Evening", example: "夕方に散歩をしました。", exampleEnglish: "I took a walk in the evening." },
                { kanji: "夜遅く", kana: "よるおそく", romaji: "yoru osoku", english: "Late at night", example: "夜遅くまで勉強しました。", exampleEnglish: "I studied until late at night." },
                { kanji: "五時間目", kana: "ごじかんめ", romaji: "go jikan me", english: "Fifth period", example: "五時間目は英語の授業です。", exampleEnglish: "The fifth period is an English class." },
                { kanji: "自習", kana: "じしゅう", romaji: "jishuu", english: "Self-study", example: "放課後に自習をしました。", exampleEnglish: "I did self-study after school." },
                { kanji: "放課後", kana: "ほうかご", romaji: "houkago", english: "After school", example: "放課後に部活があります。", exampleEnglish: "There is a club activity after school." },
                { kanji: "文章", kana: "ぶんしょう", romaji: "bunshou", english: "Text/Sentence", example: "文章を書くのが好きです。", exampleEnglish: "I like writing texts." },
                { kanji: "黒板", kana: "こくばん", romaji: "kokuban", english: "Blackboard", example: "先生は黒板に字を書きました。", exampleEnglish: "The teacher wrote on the blackboard." }
            ],

            3: [
                { kanji: "伝統的な", kana: "でんとうてきな", romaji: "dentoutekina", english: "Traditional", example: "日本の伝統的な料理を食べました。", exampleEnglish: "I ate traditional Japanese food." },
                { kanji: "人力車", kana: "じんりきしゃ", romaji: "jinrikisha", english: "Rickshaw", example: "京都で人力車に乗りました。", exampleEnglish: "I rode a rickshaw in Kyoto." },
                { kanji: "ふで", kana: "ふで", romaji: "fude", english: "Brush", example: "書道でふでを使います。", exampleEnglish: "We use a brush in calligraphy." },
                { kanji: "ゆっくり", kana: "ゆっくり", romaji: "yukkuri", english: "Slowly", example: "お茶をゆっくり飲みましょう。", exampleEnglish: "Let's drink tea slowly." },
                { kanji: "直接", kana: "ちょくせつ", romaji: "chokusetsu", english: "Directly", example: "先生に直接聞きました。", exampleEnglish: "I asked the teacher directly." },
                { kanji: "茶道", kana: "さどう", romaji: "sadou", english: "Tea ceremony", example: "茶道を学びました。", exampleEnglish: "I learned about the tea ceremony." },
                { kanji: "文字", kana: "もじ", romaji: "moji", english: "Character", example: "漢字は日本の文字です。", exampleEnglish: "Kanji are Japanese characters." },
                { kanji: "意味", kana: "いみ", romaji: "imi", english: "Meaning", example: "この言葉の意味を教えてください。", exampleEnglish: "Please tell me the meaning of this word." },
                { kanji: "言葉", kana: "ことば", romaji: "kotoba", english: "Word/Language", example: "新しい言葉を覚えました。", exampleEnglish: "I learned a new word." },
                { kanji: "生け花", kana: "いけばな", romaji: "ikebana", english: "Flower arrangement", example: "生け花を体験しました。", exampleEnglish: "I experienced flower arrangement." },
                { kanji: "お茶の点て方", kana: "おちゃのたてかた", romaji: "ocha no tatekata", english: "How to make tea", example: "お茶の点て方を教わりました。", exampleEnglish: "I was taught how to make tea." },
                { kanji: "記念写真", kana: "きねんしゃしん", romaji: "kinen shashin", english: "Commemorative photo", example: "友達と記念写真を撮りました。", exampleEnglish: "I took a commemorative photo with my friends." },
                { kanji: "メイク", kana: "めいく", romaji: "meiku", english: "Makeup", example: "イベントのためにメイクをしました。", exampleEnglish: "I did my makeup for the event." },
                { kanji: "浴衣", kana: "ゆかた", romaji: "yukata", english: "Yukata", example: "夏祭りで浴衣を着ました。", exampleEnglish: "I wore a yukata at the summer festival." },
                { kanji: "体験する", kana: "たいけんする", romaji: "taiken suru", english: "To experience", example: "日本文化を体験しました。", exampleEnglish: "I experienced Japanese culture." },
                { kanji: "経験する", kana: "けいけんする", romaji: "keiken suru", english: "To experience (general)", example: "新しい仕事を経験しました。", exampleEnglish: "I experienced a new job." },
                { kanji: "学ぶ", kana: "まなぶ", romaji: "manabu", english: "To learn", example: "歴史を学びます。", exampleEnglish: "I learn history." },
                { kanji: "持ち帰る", kana: "もちかえる", romaji: "mochikaeru", english: "To take home", example: "お土産を持ち帰りました。", exampleEnglish: "I took home a souvenir." },
                { kanji: "思い出", kana: "おもいで", romaji: "omoide", english: "Memory", example: "旅行は良い思い出になりました。", exampleEnglish: "The trip became a good memory." },
                { kanji: "所", kana: "ところ", romaji: "tokoro", english: "Place", example: "面白い所を見つけました。", exampleEnglish: "I found an interesting place." },
                { kanji: "料金", kana: "りょうきん", romaji: "ryoukin", english: "Fee", example: "入場料金はいくらですか。", exampleEnglish: "How much is the admission fee?" },
                { kanji: "よやくする", kana: "よやくする", romaji: "yoyaku suru", english: "To reserve", example: "ホテルをよやくしました。", exampleEnglish: "I reserved a hotel." },
                { kanji: "明後日", kana: "あさって", romaji: "asatte", english: "Day after tomorrow", example: "明後日に行きます。", exampleEnglish: "I will go the day after tomorrow." },
                { kanji: "道具", kana: "どうぐ", romaji: "dougu", english: "Tool", example: "料理にはいろいろな道具が必要です。", exampleEnglish: "Various tools are needed for cooking." }
            ],

            4: [
                { kanji: "現代的な", kana: "げんだいてきな", romaji: "gendai tekina", english: "Modern", example: "この建物は現代的なデザインです。", exampleEnglish: "This building has a modern design." },
                { kanji: "紹介する", kana: "しょうかいする", romaji: "shoukai suru", english: "To introduce", example: "友達を紹介します。", exampleEnglish: "I will introduce my friend." },
                { kanji: "原宿", kana: "はらじゅく", romaji: "harajuku", english: "Harajuku", example: "原宿でショッピングを楽しみました。", exampleEnglish: "I enjoyed shopping in Harajuku." },
                { kanji: "そめる", kana: "そめる", romaji: "someru", english: "To dye", example: "髪を赤にそめました。", exampleEnglish: "I dyed my hair red." },
                { kanji: "わかもの", kana: "わかもの", romaji: "wakamono", english: "Young people", example: "わかものはファッションに興味があります。", exampleEnglish: "Young people are interested in fashion." },
                { kanji: "文化", kana: "ぶんか", romaji: "bunka", english: "Culture", example: "日本の文化に興味があります。", exampleEnglish: "I am interested in Japanese culture." },
                { kanji: "目立つ", kana: "めだつ", romaji: "medatsu", english: "To stand out", example: "彼の服はとても目立ちます。", exampleEnglish: "His clothes really stand out." },
                { kanji: "ユニークな", kana: "ゆにーくな", romaji: "yuni-ku na", english: "Unique", example: "彼女のスタイルはユニークです。", exampleEnglish: "Her style is unique." },
                { kanji: "このような", kana: "このような", romaji: "kono you na", english: "Like this", example: "このような問題は難しいです。", exampleEnglish: "Problems like this are difficult." },
                { kanji: "話題の", kana: "わだいの", romaji: "wadai no", english: "Trending", example: "話題のレストランに行きました。", exampleEnglish: "I went to a trending restaurant." },
                { kanji: "味", kana: "あじ", romaji: "aji", english: "Flavor/Taste", example: "このスープはとても良い味です。", exampleEnglish: "This soup has a very good taste." },
                { kanji: "お守り", kana: "おまもり", romaji: "omamori", english: "Amulet", example: "神社でお守りを買いました。", exampleEnglish: "I bought an amulet at the shrine." },
                { kanji: "おみくじ", kana: "おみくじ", romaji: "omikuji", english: "Fortune slip", example: "おみくじを引いて運勢を占いました。", exampleEnglish: "I drew a fortune slip to see my luck." },
                { kanji: "叶う", kana: "かなう", romaji: "kanau", english: "To come true", example: "夢が叶いました。", exampleEnglish: "My dream came true." },
                { kanji: "平日", kana: "へいじつ", romaji: "heijitsu", english: "Weekday", example: "平日は忙しいです。", exampleEnglish: "Weekdays are busy." },
                { kanji: "休日", kana: "きゅうじつ", romaji: "kyuujitsu", english: "Holiday", example: "休日に家族と出かけました。", exampleEnglish: "I went out with my family on a holiday." },
                { kanji: "個性的な", kana: "こせいてきな", romaji: "kosei tekina", english: "Individualistic", example: "彼の服はとても個性的です。", exampleEnglish: "His clothes are very individualistic." },
                { kanji: "びっくりする", kana: "びっくりする", romaji: "bikkuri suru", english: "To be surprised", example: "彼の発言にびっくりしました。", exampleEnglish: "I was surprised by his statement." },
                { kanji: "洋服", kana: "ようふく", romaji: "youfuku", english: "Western clothes", example: "新しい洋服を買いました。", exampleEnglish: "I bought new Western clothes." },
                { kanji: "観光客", kana: "かんこうきゃく", romaji: "kankou kyaku", english: "Tourist", example: "京都には多くのかんこうきゃくがいます。", exampleEnglish: "There are many tourists in Kyoto." },
                { kanji: "参加する", kana: "さんかする", romaji: "sanka suru", english: "To participate", example: "友達とイベントにさんかしました。", exampleEnglish: "I participated in the event with my friends." }
            ],

            5: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],            
            6: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
            7: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
            8: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
            9: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
            10: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
            11: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
            12: [
                { kanji: "本", kana: "ほん", romaji: "hon", english: "Book", example: "本を読みます。", exampleRomaji: "Hon o yomimasu.", exampleEnglish: "I read a book." },
                { kanji: "犬", kana: "いぬ", romaji: "inu", english: "Dog", example: "犬がいます。", exampleRomaji: "Inu ga imasu.", exampleEnglish: "There is a dog." },
                { kanji: "猫", kana: "ねこ", romaji: "neko", english: "Cat", example: "猫が好きです。", exampleRomaji: "Neko ga suki desu.", exampleEnglish: "I like cats." },
                { kanji: "家", kana: "いえ", romaji: "ie", english: "House", example: "家に帰ります。", exampleRomaji: "Ie ni kaerimasu.", exampleEnglish: "I return home." },
                { kanji: "食べる", kana: "たべる", romaji: "taberu", english: "To eat", example: "ご飯を食べます。", exampleRomaji: "Gohan o tabemasu.", exampleEnglish: "I eat a meal." },
                { kanji: "飲む", kana: "のむ", romaji: "nomu", english: "To drink", example: "水を飲みます。", exampleRomaji: "Mizu o nomimasu.", exampleEnglish: "I drink water." },
                { kanji: "行く", kana: "いく", romaji: "iku", english: "To go", example: "学校に行きます。", exampleRomaji: "Gakkou ni ikimasu.", exampleEnglish: "I go to school." },
                { kanji: "見る", kana: "みる", romaji: "miru", english: "To see", example: "映画を見ます。", exampleRomaji: "Eiga o mimasu.", exampleEnglish: "I watch a movie." },
                { kanji: "聞く", kana: "きく", romaji: "kiku", english: "To listen", example: "音楽を聞きます。", exampleRomaji: "Ongaku o kikimasu.", exampleEnglish: "I listen to music." },
                { kanji: "友人", kana: "ゆうじん", romaji: "yuujin", english: "Friend", example: "友人に会います。", exampleRomaji: "Yuujin ni aimasu.", exampleEnglish: "I meet my friend." }
            ],
        };

        let currentCardIndex = -1;
        let previousCardIndex = -1;
        let showingMeaning = false;
        let currentSet = [];

function chooseSet(setNumber) {
    currentSet = vocabularySets[setNumber];
    document.getElementById('catalogue-container').style.display = 'none';

    // Show vocabulary preview
    const previewContainer = document.createElement('div');
    previewContainer.id = 'preview-container';
    previewContainer.style.padding = '20px';
    previewContainer.style.backgroundColor = '#ffffff';
    previewContainer.style.borderRadius = '15px';
    previewContainer.style.boxShadow = '0 8px 16px rgba(0, 0, 0, 0.2)';
    previewContainer.style.marginBottom = '20px';

    let previewHtml = '<h3>Vocabulary Preview</h3><ul>';
    currentSet.forEach(card => {
        previewHtml += `<li>${card.kanji} (${card.kana}) - ${card.english}</li>`;
    });
    previewHtml += '</ul><button class="catalogue-button" onclick="proceedToModeSelection()">Proceed to Practice</button>';
    previewContainer.innerHTML = previewHtml;

    document.body.appendChild(previewContainer);
}






function proceedToModeSelection() {
    const previewContainer = document.getElementById('preview-container');
    if (previewContainer) {
        previewContainer.remove();
    }
    document.getElementById('mode-container').style.display = 'flex';
        }

        function startFlashcardMode() {
    // Hide all other containers
    document.getElementById('mode-container').style.display = 'none';
    document.getElementById('test-container').classList.remove('show');
    document.getElementById('matching-container').style.display = 'none';
    document.getElementById('listening-container').style.display = 'none';

    // Show Flashcard Mode container
    const flashcardContainer = document.getElementById('flashcard-container');
    flashcardContainer.style.display = 'flex';
    flashcardContainer.classList.add('show');

    // Start Flashcard Mode
    nextFlashcard();
}


        function startTestMode() {
    // Hide all other containers
    document.getElementById('catalogue-container').style.display = 'none';
    document.getElementById('mode-container').style.display = 'none';
    document.getElementById('flashcard-container').classList.remove('show');
    document.getElementById('matching-container').style.display = 'none';
    document.getElementById('listening-container').style.display = 'none';

    // Reset and show Test Mode container
    const testContainer = document.getElementById('test-container');
    testContainer.style.display = 'flex'; // Ensure it is displayed
    testContainer.classList.add('show');

    // Reset variables
    currentQuestion = 0;
    correctAnswers = 0;

    // Shuffle the vocabulary set
    currentSet = shuffleArray([...currentSet]);

    // Start the first test question
    nextTestQuestion();
}



function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}



function nextFlashcard() {
    // Play card flip sound
    const cardFlipSound = document.getElementById('card-flip-sound');
    cardFlipSound.play();

    // Move to the next card in sequence
    currentCardIndex++;

    // If the index exceeds the last card, restart from the first card
    if (currentCardIndex >= currentSet.length) {
        currentCardIndex = 0;
    }

    // Reset showingMeaning and update the flashcard
    showingMeaning = false;
    updateFlashcard();

    // Hide the "Next" and "Study Again" buttons until the meaning is shown again
    document.getElementById('next-button').style.display = 'none';
    document.getElementById('study-again-button').style.display = 'none';

    // Show the "Show Meaning" button for the next word
    document.getElementById('show-meaning-button').style.display = 'inline-block';
}





function showMeaning() {
    showingMeaning = true;
    updateFlashcard();

    // Hide "Show Meaning" button once it's clicked
    document.getElementById('show-meaning-button').style.display = 'none';

    // Show the "Next" and "Study Again" buttons
    document.getElementById('next-button').style.display = 'inline-block';
    document.getElementById('study-again-button').style.display = 'inline-block';
}


function studyAgain() {
    // Add the current card back to the end of the deck
    currentSet.push(currentSet[currentCardIndex]);
    
    // Move to the next card
    currentCardIndex++;
    if (currentCardIndex >= currentSet.length) {
        currentCardIndex = 0; // Wrap around if needed
    }

    // Reset showingMeaning and update the flashcard to hide the meaning
    showingMeaning = false;
    updateFlashcard();

    // Hide the "Next" and "Study Again" buttons
    document.getElementById('study-again-button').style.display = 'none';
    document.getElementById('next-button').style.display = 'none';

    // Show the "Show Meaning" button for the next word
    document.getElementById('show-meaning-button').style.display = 'inline-block';
}



function updateFlashcard() {
            const card = currentSet[currentCardIndex];
            const flashcardElement = document.getElementById('flashcard');
            if (showingMeaning) {
                flashcardElement.innerHTML = `<span class="romaji-text">${card.romaji}</span><br><span class="kana-text">${card.kana}</span><br><span class="english-text">${card.english}</span><br><br><strong>Example:</strong><br>${card.example}${card.exampleEnglish}`;
            } else {
                flashcardElement.innerHTML = card.kanji;
            }
        }

function playAudio() {
    const card = currentSet[currentCardIndex];
    const utterance = new SpeechSynthesisUtterance(showingMeaning ? card.example : card.kana);
    utterance.lang = 'ja-JP';
    utterance.rate = 1; // Slower reading speed

    // Fetch available voices
    let voices = window.speechSynthesis.getVoices();

    // Wait until voices are loaded (sometimes they are not loaded immediately)
    if (voices.length === 0) {
        window.speechSynthesis.onvoiceschanged = () => {
            voices = window.speechSynthesis.getVoices();
            setJapaneseVoice(utterance, voices);
            window.speechSynthesis.speak(utterance);
        };
    } else {
        setJapaneseVoice(utterance, voices);
        window.speechSynthesis.speak(utterance);
    }
}

function setJapaneseVoice(utterance, voices) {
    // Find the Google 日本語 voice among the available voices
    const googleJapaneseVoice = voices.find(voice => voice.name === "Google 日本語");
    
    if (googleJapaneseVoice) {
        utterance.voice = googleJapaneseVoice;
    } else {
        // Fallback: use the first Japanese voice available if Google 日本語 is not found
        const otherJapaneseVoice = voices.find(voice => voice.lang === "ja-JP");
        if (otherJapaneseVoice) {
            utterance.voice = otherJapaneseVoice;
        }
    }
}


function correctAnswer() {
    // Increment the count of correct answers
    correctAnswers++;

    // Play the correct answer sound
    const correctSound = new Audio('correct-answer-sound.mp3');
    correctSound.play();

    // Show a brief message instead of an alert
    displayMessage("Correct!", true);

    // Proceed to the next question after a short delay
    setTimeout(nextTestQuestion, 1000);
}


function nextTestQuestion() {
    // Check if we've completed all questions in the set
    if (currentQuestion >= currentSet.length) {
        // Play Pikachu sound when the test completes
        const pikachuSound = document.getElementById('pikachu-sound');
        pikachuSound.play();

        // Show completion message
        alert(`Test complete! You got ${correctAnswers}/${currentSet.length} correct.`);
        goBackToCatalogue();
        return;
    }

    // Set the current card to the next one in sequence
    currentCardIndex = currentQuestion;

    const card = currentSet[currentCardIndex];
    currentQuestion++; // Move to the next question after setting the current one

    // Update the test question text
    const testQuestionElement = document.getElementById('test-question');
    testQuestionElement.innerHTML = `(${currentQuestion}/${currentSet.length}) What is the meaning of: ${card.kanji} (${card.kana})?`;

    // Clear previous answers and generate new ones
    const answerContainer = document.getElementById('test-answers');
    answerContainer.innerHTML = '';
    const correctAnswerIndex = Math.floor(Math.random() * 4);

    for (let i = 0; i < 4; i++) {
        const button = document.createElement('button');
        button.className = 'catalogue-button';
        if (i === correctAnswerIndex) {
            button.innerHTML = card.english;
            button.onclick = () => correctAnswer();
        } else {
            let wrongAnswer;
            do {
                wrongAnswer = currentSet[Math.floor(Math.random() * currentSet.length)].english;
            } while (wrongAnswer === card.english || wrongAnswer === undefined);
            button.innerHTML = wrongAnswer;
            button.onclick = () => incorrectAnswer();
        }
        answerContainer.appendChild(button);
    }

    playTestAudio();
}



function playTestAudio() {
    const card = currentSet[currentCardIndex];
    const utterance = new SpeechSynthesisUtterance(card.kana);
    utterance.lang = 'ja-JP';
    utterance.rate = 1; // Set reading speed to be slower

    // Fetch available voices
    let voices = window.speechSynthesis.getVoices();

    // Wait until voices are loaded (sometimes they are not loaded immediately)
    if (voices.length === 0) {
        window.speechSynthesis.onvoiceschanged = () => {
            voices = window.speechSynthesis.getVoices();
            setJapaneseVoice(utterance, voices);
            window.speechSynthesis.speak(utterance);
        };
    } else {
        setJapaneseVoice(utterance, voices);
        window.speechSynthesis.speak(utterance);
    }
}

        function correctAnswer() {
    correctAnswers++;
    const audio = new Audio('correct-answer-sound.mp3');
    audio.play();
    alert('Correct!');
    nextTestQuestion();
}

function incorrectAnswer() {
    alert('Incorrect. Try again!');
}




function goBackToCatalogue() {
    // Hide all mode-specific containers
    document.getElementById('matching-container').style.display = 'none';
    document.getElementById('test-container').style.display = 'none';
    document.getElementById('test-container').classList.remove('show'); 
    document.getElementById('flashcard-container').classList.remove('show');
    document.getElementById('listening-container').style.display = 'none';
    document.getElementById('mode-container').style.display = 'none';

    // Ensure the catalogue container uses grid layout
    const catalogueContainer = document.getElementById('catalogue-container');
    catalogueContainer.style.display = 'block';  // Using 'block' or 'flex' can break grid; ensure it's correct
    catalogueContainer.querySelector('.button-grid').style.display = 'grid';
    
    // Remove the preview container if it exists
    const previewContainer = document.getElementById('preview-container');
    if (previewContainer) {
        previewContainer.remove();
    }
}



function checkListeningAnswer(selectedAnswer, correctAnswer) {
        if (selectedAnswer === correctAnswer) {
            correctAnswers++;
            const correctSound = new Audio('correct-answer-sound.mp3');
            correctSound.play();  // Play the sound for correct answer immediately

            // Show a brief message instead of an alert
            displayMessage("Correct!", true);

            // Proceed to the next question after a short delay
            setTimeout(loadListeningQuestion, 1000);
        } else {
            // Show a brief message instead of an alert
            displayMessage("Incorrect. Try again!", false);
        }
    }

    // Function for correct answers in Test Mode
    function correctAnswer() {
        correctAnswers++;
        const correctSound = new Audio('correct-answer-sound.mp3');
        correctSound.play();  // Play the sound for correct answer immediately

        // Show a brief message instead of an alert
        displayMessage("Correct!", true);

        // Proceed to the next question after a short delay
        setTimeout(nextTestQuestion, 1000);
    }

    // Function to display a message without blocking JavaScript execution
    function displayMessage(message, isCorrect) {
        const messageElement = document.createElement('div');
        messageElement.textContent = message;
        messageElement.style.position = 'fixed';
        messageElement.style.bottom = '20px';
        messageElement.style.left = '50%';
        messageElement.style.transform = 'translateX(-50%)';
        messageElement.style.padding = '10px 20px';
        messageElement.style.backgroundColor = isCorrect ? 'black' : 'red';
        messageElement.style.color = 'white';
        messageElement.style.borderRadius = '8px';
        messageElement.style.fontSize = '1.2em';
        messageElement.style.zIndex = '1000';
        document.body.appendChild(messageElement);

        // Remove the message after 1 second
        setTimeout(() => {
            document.body.removeChild(messageElement);
        }, 1000);
    }



    function startMatchingMode() {
    // Hide other containers if they are still visible
    document.getElementById('catalogue-container').style.display = 'none';
    document.getElementById('mode-container').style.display = 'none';
    document.getElementById('test-container').classList.remove('show');
    document.getElementById('flashcard-container').classList.remove('show');
    document.getElementById('listening-container').style.display = 'none';
    document.getElementById('matching-container').style.display = 'flex';
    document.querySelector('.home-button').style.display = 'block';

    loadMatchingPairs();
}



function loadMatchingPairs() {
    const matchingGameContainer = document.getElementById('matching-game');
    matchingGameContainer.innerHTML = '';

    // Randomly select 8 pairs of words
    const selectedPairs = shuffleArray(currentSet).slice(0, 8);

    // Create an array of both Japanese and English items and shuffle it
    let items = [];
    selectedPairs.forEach(pair => {
        // Only display Kana for Japanese words
        items.push({ text: pair.kana, type: 'japanese', pairId: pair.english });
        items.push({ text: pair.english, type: 'english', pairId: pair.english });
    });
    items = shuffleArray(items);

    // Add items to the matching game container
    items.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'matching-item';
        div.textContent = item.text;
        div.dataset.pairId = item.pairId;
        div.onclick = () => handleMatchingClick(div);
        matchingGameContainer.appendChild(div);
    });
}


let selectedItems = []; // Tracks currently selected items
let debounce = false;   // Prevents rapid clicks from being processed

function handleMatchingClick(item) {
    if (debounce) return; // Ignore clicks during debounce period

    if (item.classList.contains('selected')) {
        // Deselect item if already selected
        item.classList.remove('selected');
        selectedItems = selectedItems.filter(i => i !== item);
    } else if (selectedItems.length < 2) {
        // Select item if less than 2 are selected
        item.classList.add('selected');
        selectedItems.push(item);

        // If two items are selected, check if they match
        if (selectedItems.length === 2) {
            debounce = true; // Block additional clicks
            setTimeout(() => {
                checkMatch();
                debounce = false; // Allow clicks after checking
            }, 500); // Adjust delay as needed
        }
    }
}


function checkMatch() {
    const [item1, item2] = selectedItems;

    if (item1.dataset.pairId === item2.dataset.pairId) {
        // Correct match - Remove matched items from the game immediately
        item1.classList.add('matched');
        item2.classList.add('matched');
        item1.style.visibility = 'hidden';
        item2.style.visibility = 'hidden';

        // Play correct answer sound when a pair is matched
        const correctSound = new Audio('correct-answer-sound.mp3');
        correctSound.play();

        selectedItems = [];

        // Check if all items are matched
        if (document.querySelectorAll('.matching-item:not(.matched)').length === 0) {
            const pikachuSound = document.getElementById('pikachu-sound');
            pikachuSound.play();
            // Hide the matching container and return to catalogue
            document.getElementById('matching-container').style.display = 'none';
            goBackToCatalogue();
        }
    } else {
        // Incorrect match - Deselect items after delay
        setTimeout(() => {
            item1.classList.remove('selected');
            item2.classList.remove('selected');
            selectedItems = [];
        }, 1000);
    }
}


function checkMatching() {
    if (document.querySelectorAll('.matching-item.matched').length === 16) {
        alert('You matched all the pairs correctly!');
        goBackToCatalogue();
    } else {
        alert('Some pairs are not correctly matched. Try again!');
    }
}


function resetAllContainers() {
    const containers = document.querySelectorAll(
        '#flashcard-container, #test-container, #matching-container, #listening-container, #mode-container'
    );
    containers.forEach(container => {
        container.style.display = 'none'; // Hide all containers
        container.classList.remove('show'); // Reset any 'show' classes
    });

    // Remove the preview container if it exists
    const previewContainer = document.getElementById('preview-container');
    if (previewContainer) {
        previewContainer.remove();
    }

    // Show the catalogue container
    const catalogueContainer = document.getElementById('catalogue-container');
    catalogueContainer.style.display = 'block';

    // Make sure button layout is restored correctly
    const buttonGrid = catalogueContainer.querySelector('.button-grid');
    if (buttonGrid) {
        buttonGrid.style.display = 'grid';
    }
}

function resetContainerStyles(container) {
    container.style.margin = '0';
    container.style.padding = '0';
    container.style.alignItems = 'center';
}



    let timerInterval; // To store the timer interval
    let startTime; // To record the start time of the activity

    function startMatchingMode() {
        // Hide other containers if they are still visible
        document.getElementById('catalogue-container').style.display = 'none';
        document.getElementById('mode-container').style.display = 'none';
        document.getElementById('test-container').classList.remove('show');
        document.getElementById('flashcard-container').classList.remove('show');
        document.getElementById('listening-container').style.display = 'none';
        document.getElementById('matching-container').style.display = 'flex';
        document.querySelector('.home-button').style.display = 'block';

        // Remove existing timer display if it exists
        const existingTimerDisplay = document.getElementById('timer-display');
        if (existingTimerDisplay) {
            existingTimerDisplay.remove();
        }

        // Stop any existing timer interval
        if (timerInterval) {
            clearInterval(timerInterval);
        }

        // Start a new timer
        startTimer();

        // Load matching pairs
        loadMatchingPairs();
    }

    function startTimer() {
        startTime = Date.now(); // Record the start time
        const timerDisplay = document.createElement('div');
        timerDisplay.id = 'timer-display';
        timerDisplay.style.fontSize = '0.7em';
        timerDisplay.style.marginTop = '50px';
        document.getElementById('matching-container').appendChild(timerDisplay);

        // Update the timer every second
        timerInterval = setInterval(() => {
            const elapsedTime = Date.now() - startTime;
            const seconds = Math.floor((elapsedTime / 1000) % 60);
            const minutes = Math.floor((elapsedTime / (1000 * 60)) % 60);
            timerDisplay.textContent = `Time: ${minutes} min ${seconds} sec`;
        }, 1000);
    }

    function stopTimer() {
        clearInterval(timerInterval); // Stop the timer
    }

    function checkMatch() {
        const [item1, item2] = selectedItems;

        if (item1.dataset.pairId === item2.dataset.pairId) {
            // Correct match - Remove matched items from the game immediately
            item1.classList.add('matched');
            item2.classList.add('matched');
            item1.style.visibility = 'hidden';
            item2.style.visibility = 'hidden';

            // Play correct answer sound when a pair is matched
            const correctSound = new Audio('correct-answer-sound.mp3');
            correctSound.play();

            selectedItems = [];

            // Check if all items are matched
            if (document.querySelectorAll('.matching-item:not(.matched)').length === 0) {
                stopTimer(); // Stop the timer
                const pikachuSound = document.getElementById('pikachu-sound');
                pikachuSound.play();
                // Hide the matching container and return to catalogue
                alert(`You completed the matching activity in ${document.getElementById('timer-display').textContent}.`);
                document.getElementById('matching-container').style.display = 'none';
                goBackToCatalogue();
            }
        } else {
            // Incorrect match - Deselect items after delay
            setTimeout(() => {
                item1.classList.remove('selected');
                item2.classList.remove('selected');
                selectedItems = [];
            }, 1000);
        }
    }


</script>








    </script>


</body></html>